"use strict";

var userPlace = document.querySelector(".you"),
  userTablePlace = userPlace.querySelector(".table__block-place"),
  cases = document.querySelectorAll(".bonus__boxes-item"),
  getBtn = document.querySelector(".get-btn"),
  levels = document.querySelectorAll(".bonus__progress-lvl"),
  progressPopup = document.querySelector(".bonus__progress-popup"),
  progressPopupBtn = document.querySelector(".bonus__progress-title-btn"),
  progressPopupClose = document.querySelector(".bonus__progress-popup-close"),
  updPopup = document.querySelector(".bonus__upd-popup"),
  updPopupBtn = document.querySelector(".bonus__upd-btn"),
  updPopupClose = document.querySelector(".bonus__upd-popup-close");
var currentLvl = sessionStorage.getItem("currentLvl") ? Number(sessionStorage.getItem("currentLvl")) : 1;
function refreshLvl(currentLvl) {
  cases.forEach(function (box, i) {
    if (++i === currentLvl) {
      box.classList.add("_active");
      setOpenCase(getBtn, box.querySelector(".box"));
    }
    i > currentLvl ? box.classList.add("_lock") : null;
  });
  levels.forEach(function (box, i) {
    if (++i === currentLvl) {
      box.classList.add("_active");
      setOpenCase(getBtn, box.querySelector(".box"));
    }
    i < currentLvl ? box.classList.add("_done") : null;
  });
}
refreshLvl(currentLvl);
var idArr = userTablePlace.textContent.split("");

// console.log(idArr)

if (idArr.length === 1) {
  userTablePlace.classList.add('_one');
}
if (idArr.length === 2) {
  userTablePlace.classList.add('_two');
}
if (idArr.length === 3) {
  userTablePlace.classList.add('_three');
}
if (idArr.length === 4) {
  userTablePlace.classList.add('_four');
}
if (idArr.length === 5) {
  userTablePlace.classList.add('_five');
}
function setOpenCase(btn, box) {
  btn.addEventListener("click", function () {
    box.classList.add("shake");
    box.querySelector(".box__cap").classList.add("open");
    setTimeout(function () {
      box.querySelector(".box__cap-front").classList.add("hide");
    }, 300);
    setTimeout(function () {
      box.classList.add("_show");
    }, 450);
  });
}
function setPopup(btnOpen, btnClose, popup) {
  btnOpen.addEventListener("click", function () {
    popup.classList.remove("hide");
  });
  btnClose.addEventListener("click", function () {
    popup.classList.add("hide");
  });
  document.addEventListener("click", function (e) {
    if (!popup.contains(e.target) && e.target !== btnOpen) {
      popup.classList.add("hide");
    }
  });
}
setPopup(progressPopupBtn, progressPopupClose, progressPopup);
setPopup(updPopupBtn, updPopupClose, updPopup);
function startCountdown(endTime) {
  var hoursEls = document.querySelectorAll(".timer__hours-item");
  var minutesEls = document.querySelectorAll(".timer__minutes-item");
  var secondsEls = document.querySelectorAll(".timer__seconds-item");
  function updateTimer() {
    var now = new Date().getTime();
    var timeLeft = endTime - now;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      updateDigits(hoursEls, "00");
      updateDigits(minutesEls, "00");
      updateDigits(secondsEls, "00");
      return;
    }
    var hours = Math.floor(timeLeft / (1000 * 60 * 60) % 24);
    var minutes = Math.floor(timeLeft / (1000 * 60) % 60);
    var seconds = Math.floor(timeLeft / 1000 % 60);
    updateDigits(hoursEls, String(hours).padStart(2, "0"));
    updateDigits(minutesEls, String(minutes).padStart(2, "0"));
    updateDigits(secondsEls, String(seconds).padStart(2, "0"));
  }
  function updateDigits(elements, value) {
    elements[0].textContent = value[0];
    elements[1].textContent = value[1];
  }
  updateTimer();
  var timerInterval = setInterval(updateTimer, 1000);
}
var now = new Date();
var endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59).getTime();
startCountdown(endOfDay);
document.querySelector(".menu-btn").addEventListener("click", function () {
  document.querySelector(".menu-test").classList.toggle("hidden");
});
document.querySelector(".btn-lvl").addEventListener("click", function () {
  document.querySelector(".lvl-menu").classList.toggle("hidden");
});
var lvl1 = document.querySelector(".lvl-1");
var lvl2 = document.querySelector(".lvl-2");
var lvl3 = document.querySelector(".lvl-3");
lvl1.addEventListener("click", function () {
  sessionStorage.setItem("currentLvl", "1");
  window.location.reload();
});
lvl2.addEventListener("click", function () {
  sessionStorage.setItem("currentLvl", "2");
  window.location.reload();
});
lvl3.addEventListener("click", function () {
  sessionStorage.setItem("currentLvl", "3");
  window.location.reload();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidXNlclBsYWNlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidXNlclRhYmxlUGxhY2UiLCJjYXNlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnZXRCdG4iLCJsZXZlbHMiLCJwcm9ncmVzc1BvcHVwIiwicHJvZ3Jlc3NQb3B1cEJ0biIsInByb2dyZXNzUG9wdXBDbG9zZSIsInVwZFBvcHVwIiwidXBkUG9wdXBCdG4iLCJ1cGRQb3B1cENsb3NlIiwiY3VycmVudEx2bCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsIk51bWJlciIsInJlZnJlc2hMdmwiLCJmb3JFYWNoIiwiYm94IiwiaSIsImNsYXNzTGlzdCIsImFkZCIsInNldE9wZW5DYXNlIiwiaWRBcnIiLCJ0ZXh0Q29udGVudCIsInNwbGl0IiwibGVuZ3RoIiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFRpbWVvdXQiLCJzZXRQb3B1cCIsImJ0bk9wZW4iLCJidG5DbG9zZSIsInBvcHVwIiwicmVtb3ZlIiwiZSIsImNvbnRhaW5zIiwidGFyZ2V0Iiwic3RhcnRDb3VudGRvd24iLCJlbmRUaW1lIiwiaG91cnNFbHMiLCJtaW51dGVzRWxzIiwic2Vjb25kc0VscyIsInVwZGF0ZVRpbWVyIiwibm93IiwiRGF0ZSIsImdldFRpbWUiLCJ0aW1lTGVmdCIsImNsZWFySW50ZXJ2YWwiLCJ0aW1lckludGVydmFsIiwidXBkYXRlRGlnaXRzIiwiaG91cnMiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGVzIiwic2Vjb25kcyIsIlN0cmluZyIsInBhZFN0YXJ0IiwiZWxlbWVudHMiLCJ2YWx1ZSIsInNldEludGVydmFsIiwiZW5kT2ZEYXkiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsInRvZ2dsZSIsImx2bDEiLCJsdmwyIiwibHZsMyIsInNldEl0ZW0iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFN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Q2hDZixjQUFjLENBQUN3RCxPQUFPLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQztFQUN6Q0MsTUFBTSxDQUFDQyxRQUFRLENBQUNDLE1BQU0sRUFBRTtBQUM1QixDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVzZXJQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueW91XCIpLFxuICAgICAgdXNlclRhYmxlUGxhY2UgPSB1c2VyUGxhY2UucXVlcnlTZWxlY3RvcihcIi50YWJsZV9fYmxvY2stcGxhY2VcIiksXG4gICAgICBjYXNlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm9udXNfX2JveGVzLWl0ZW1cIiksXG4gICAgICBnZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdldC1idG5cIiksXG4gICAgICBsZXZlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvbnVzX19wcm9ncmVzcy1sdmxcIiksXG4gICAgICBwcm9ncmVzc1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fcHJvZ3Jlc3MtcG9wdXBcIiksXG4gICAgICBwcm9ncmVzc1BvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fcHJvZ3Jlc3MtdGl0bGUtYnRuXCIpLFxuICAgICAgcHJvZ3Jlc3NQb3B1cENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fcHJvZ3Jlc3MtcG9wdXAtY2xvc2VcIiksXG4gICAgICB1cGRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9udXNfX3VwZC1wb3B1cFwiKSxcbiAgICAgIHVwZFBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fdXBkLWJ0blwiKSxcbiAgICAgIHVwZFBvcHVwQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvbnVzX191cGQtcG9wdXAtY2xvc2VcIik7XG5cbmxldCBjdXJyZW50THZsID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRMdmxcIikgPyBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRMdmxcIikpIDogMVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hMdmwoY3VycmVudEx2bCl7XG4gICAgY2FzZXMuZm9yRWFjaCgoYm94LCBpKSA9PntcbiAgICAgICAgaWYoKytpID09PSBjdXJyZW50THZsKSB7XG4gICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZChcIl9hY3RpdmVcIilcbiAgICAgICAgICAgIHNldE9wZW5DYXNlKGdldEJ0biwgYm94LnF1ZXJ5U2VsZWN0b3IoXCIuYm94XCIpKVxuICAgICAgICB9XG5cbiAgICAgICAgaSA+IGN1cnJlbnRMdmwgPyBib3guY2xhc3NMaXN0LmFkZChcIl9sb2NrXCIpIDogbnVsbFxuICAgIH0pXG5cbiAgICBsZXZlbHMuZm9yRWFjaCgoYm94LCBpKSA9PntcbiAgICAgICAgaWYoKytpID09PSBjdXJyZW50THZsKSB7XG4gICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZChcIl9hY3RpdmVcIilcbiAgICAgICAgICAgIHNldE9wZW5DYXNlKGdldEJ0biwgYm94LnF1ZXJ5U2VsZWN0b3IoXCIuYm94XCIpKVxuICAgICAgICB9XG5cbiAgICAgICAgaSA8IGN1cnJlbnRMdmwgPyBib3guY2xhc3NMaXN0LmFkZChcIl9kb25lXCIpIDogbnVsbFxuICAgIH0pXG59XG5cbnJlZnJlc2hMdmwoY3VycmVudEx2bClcblxuXG5cbmxldCBpZEFyciA9IHVzZXJUYWJsZVBsYWNlLnRleHRDb250ZW50LnNwbGl0KFwiXCIpXG5cbi8vIGNvbnNvbGUubG9nKGlkQXJyKVxuXG5pZihpZEFyci5sZW5ndGggPT09IDEpe1xuICAgIHVzZXJUYWJsZVBsYWNlLmNsYXNzTGlzdC5hZGQoJ19vbmUnKVxufVxuaWYoaWRBcnIubGVuZ3RoID09PSAyKXtcbiAgICB1c2VyVGFibGVQbGFjZS5jbGFzc0xpc3QuYWRkKCdfdHdvJylcbn1cbmlmKGlkQXJyLmxlbmd0aCA9PT0gMyl7XG4gICAgdXNlclRhYmxlUGxhY2UuY2xhc3NMaXN0LmFkZCgnX3RocmVlJylcbn1cbmlmKGlkQXJyLmxlbmd0aCA9PT0gNCl7XG4gICAgdXNlclRhYmxlUGxhY2UuY2xhc3NMaXN0LmFkZCgnX2ZvdXInKVxufVxuXG5pZihpZEFyci5sZW5ndGggPT09IDUpe1xuICAgIHVzZXJUYWJsZVBsYWNlLmNsYXNzTGlzdC5hZGQoJ19maXZlJylcbn1cblxuZnVuY3Rpb24gc2V0T3BlbkNhc2UgKGJ0biwgYm94KXtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICBib3guY2xhc3NMaXN0LmFkZChcInNoYWtlXCIpXG4gICAgICAgIGJveC5xdWVyeVNlbGVjdG9yKFwiLmJveF9fY2FwXCIpLmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBib3gucXVlcnlTZWxlY3RvcihcIi5ib3hfX2NhcC1mcm9udFwiKS5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgICAgICB9LCAzMDApXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBib3guY2xhc3NMaXN0LmFkZChcIl9zaG93XCIpXG4gICAgICAgIH0sIDQ1MClcblxuICAgIH0pXG59XG5cblxuXG5mdW5jdGlvbiBzZXRQb3B1cChidG5PcGVuLCBidG5DbG9zZSwgcG9wdXApe1xuICAgIGJ0bk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKVxuICAgIH0pXG4gICAgYnRuQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgIH0pXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PntcbiAgICAgICAgaWYoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0KSAmJiBlLnRhcmdldCAhPT0gYnRuT3Blbil7XG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuc2V0UG9wdXAocHJvZ3Jlc3NQb3B1cEJ0biwgcHJvZ3Jlc3NQb3B1cENsb3NlLCBwcm9ncmVzc1BvcHVwKVxuc2V0UG9wdXAodXBkUG9wdXBCdG4sIHVwZFBvcHVwQ2xvc2UsIHVwZFBvcHVwKVxuXG5mdW5jdGlvbiBzdGFydENvdW50ZG93bihlbmRUaW1lKSB7XG4gICAgY29uc3QgaG91cnNFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyX19ob3Vycy1pdGVtXCIpO1xuICAgIGNvbnN0IG1pbnV0ZXNFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyX19taW51dGVzLWl0ZW1cIik7XG4gICAgY29uc3Qgc2Vjb25kc0VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZXJfX3NlY29uZHMtaXRlbVwiKTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWVyKCkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgdGltZUxlZnQgPSBlbmRUaW1lIC0gbm93O1xuXG4gICAgICAgIGlmICh0aW1lTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySW50ZXJ2YWwpO1xuICAgICAgICAgICAgdXBkYXRlRGlnaXRzKGhvdXJzRWxzLCBcIjAwXCIpO1xuICAgICAgICAgICAgdXBkYXRlRGlnaXRzKG1pbnV0ZXNFbHMsIFwiMDBcIik7XG4gICAgICAgICAgICB1cGRhdGVEaWdpdHMoc2Vjb25kc0VscywgXCIwMFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigodGltZUxlZnQgLyAoMTAwMCAqIDYwICogNjApKSAlIDI0KTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0IC8gKDEwMDAgKiA2MCkpICUgNjApO1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcigodGltZUxlZnQgLyAxMDAwKSAlIDYwKTtcblxuICAgICAgICB1cGRhdGVEaWdpdHMoaG91cnNFbHMsIFN0cmluZyhob3VycykucGFkU3RhcnQoMiwgXCIwXCIpKTtcbiAgICAgICAgdXBkYXRlRGlnaXRzKG1pbnV0ZXNFbHMsIFN0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCBcIjBcIikpO1xuICAgICAgICB1cGRhdGVEaWdpdHMoc2Vjb25kc0VscywgU3RyaW5nKHNlY29uZHMpLnBhZFN0YXJ0KDIsIFwiMFwiKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGlnaXRzKGVsZW1lbnRzLCB2YWx1ZSkge1xuICAgICAgICBlbGVtZW50c1swXS50ZXh0Q29udGVudCA9IHZhbHVlWzBdO1xuICAgICAgICBlbGVtZW50c1sxXS50ZXh0Q29udGVudCA9IHZhbHVlWzFdO1xuICAgIH1cblxuICAgIHVwZGF0ZVRpbWVyKCk7XG4gICAgY29uc3QgdGltZXJJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCAxMDAwKTtcbn1cblxuY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbmNvbnN0IGVuZE9mRGF5ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpLCAyMywgNTksIDU5KS5nZXRUaW1lKCk7XG5cbnN0YXJ0Q291bnRkb3duKGVuZE9mRGF5KTtcblxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtYnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtdGVzdFwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG59KVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tbHZsXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmx2bC1tZW51XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbn0pXG5cbmNvbnN0IGx2bDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmx2bC0xXCIpXG5jb25zdCBsdmwyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sdmwtMlwiKVxuY29uc3QgbHZsMyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubHZsLTNcIilcblxubHZsMS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMdmxcIiwgXCIxXCIpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59KVxubHZsMi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMdmxcIiwgXCIyXCIpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59KVxubHZsMy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMdmxcIiwgXCIzXCIpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59KVxuXG4iXX0=
