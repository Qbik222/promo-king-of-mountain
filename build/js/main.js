"use strict";

var userPlace = document.querySelector(".you"),
  userTablePlace = userPlace.querySelector(".table__block-place"),
  cases = document.querySelectorAll(".bonus__boxes-item"),
  getBtn = document.querySelector(".get-btn"),
  levels = document.querySelectorAll(".bonus__progress-lvl"),
  progressPopup = document.querySelector(".bonus__progress-popup"),
  progressPopupBtn = document.querySelector(".bonus__progress-title-btn"),
  progressPopupClose = document.querySelector(".bonus__progress-popup-close"),
  updPopup = document.querySelector(".bonus__warning"),
  updPopupBtn = document.querySelector(".bonus__upd-btn"),
  resultPopup = document.querySelector(".result__subtitle-popup"),
  resultPopupBtn = document.querySelector(".result__subtitle-btn"),
  resultPopupBtnClose = document.querySelector(".result__subtitle-popup-close");
var currentLvl = sessionStorage.getItem("currentLvl") ? Number(sessionStorage.getItem("currentLvl")) : 1;
var lvlStatus = false;
var betWinCounter = sessionStorage.getItem("betWinCounter") ? Number(sessionStorage.getItem("betWinCounter")) : 0;
var openCaseCounter = sessionStorage.getItem("openCaseCounter") ? Number(sessionStorage.getItem("openCaseCounter")) : 0;

// if(currentLvl === 1 && betWinCounter > 1 ){
//     lvlStatus = true
// }
// if(currentLvl === 2 && betWinCounter > 3){
//     lvlStatus = true
// }
// if(currentLvl === 3 && betWinCounter > 5){
//     lvlStatus = true
// }

lvlStatus = checkStatus();
function checkStatus() {
  var activeLvl = document.querySelector(".bonus__progress-lvl._active");
  var conditions = {
    bet: {
      1: betWinCounter > 1,
      2: betWinCounter > 3,
      3: betWinCounter > 5
    },
    lvl: {
      1: currentLvl === 1,
      2: currentLvl === 2,
      3: currentLvl === 3
    }
  };
  getBtn.classList.add("_lock");
  if (conditions.bet[currentLvl] && conditions.lvl[currentLvl]) {
    lvlStatus = true;
    refreshLvl(currentLvl, lvlStatus);
    getBtn.classList.remove("_lock");
    if (activeLvl) activeLvl.classList.add("_up");
    return lvlStatus;
  }
  lvlStatus = false;
  refreshLvl(currentLvl, lvlStatus);
  return false;
}
function refreshLvl(currentLvl, lvlStatus) {
  levels.forEach(function (lvl, i) {
    lvl.classList.remove("_active");
    lvl.classList.remove("_done");
    lvl.classList.remove("_void");
    lvl.classList.remove("_up");
    if (++i === currentLvl) {
      lvl.classList.add("_active");
      if (lvlStatus === true) {
        lvl.classList.add("_up");
      }
      if (currentLvl === 1 && betWinCounter <= 0 && lvlStatus === false) {
        lvl.classList.add("_void");
      }
      if (currentLvl === 1 && betWinCounter <= 0 && lvlStatus === true) {
        lvl.classList.remove("_void");
      }
      if (currentLvl === 2 && betWinCounter <= 2 && lvlStatus === false) {
        lvl.classList.add("_void");
      }
      if (currentLvl === 2 && betWinCounter <= 2 && lvlStatus === true) {
        lvl.classList.remove("_void");
      }
      if (currentLvl === 3 && betWinCounter <= 4 && lvlStatus === false) {
        lvl.classList.add("_void");
      }
      if (currentLvl === 3 && betWinCounter <= 4 && lvlStatus === true) {
        lvl.classList.remove("_void");
      }
    } else {
      lvl.classList.remove("_active");
    }
    // console.log(i < currentLvl, i , currentLvl, lvl)
    i < currentLvl ? lvl.classList.add("_done") : null;
  });
}
function refreshCases(currentLvl) {
  cases.forEach(function (box, i) {
    box.classList.remove("_active", "_left", "_right", "_lock");
  });
  var activeIndex = currentLvl - 1;
  if (activeIndex >= cases.length) {
    activeIndex = cases.length - 1;
  }
  var prevIndex = activeIndex - 1 < 0 ? cases.length - 1 : activeIndex - 1;
  var nextIndex = activeIndex + 1 >= cases.length ? 0 : activeIndex + 1;
  cases[activeIndex].classList.add("_active");
  cases[prevIndex].classList.add("_left");
  cases[nextIndex].classList.add("_right");
  cases.forEach(function (box, i) {
    if (i !== activeIndex) {
      box.classList.add("_lock");
    }
  });
}
refreshCases(currentLvl);
refreshLvl(currentLvl);
function lvlUp() {
  currentLvl = currentLvl + 1;
  sessionStorage.setItem("currentLvl", "".concat(currentLvl));
  // lvlStatus = false
  checkStatus();
  return lvlStatus;
}

// function checkStatus(){
//     if(currentLvl === 1 && betWinCounter > 1 ){
//         lvlStatus = true
//         refreshLvl(currentLvl)
//         getBtn.classList.remove("_lock")
//         document.querySelector(".bonus__progress-lvl._active").classList.add("_up")
//         return lvlStatus
//     }
//     if(currentLvl === 2 && betWinCounter > 3){
//         lvlStatus = true
//         refreshLvl(currentLvl)
//         getBtn.classList.remove("_lock")
//         document.querySelector(".bonus__progress-lvl._active").classList.add("_up")
//         return lvlStatus
//     }
//     if(currentLvl === 3 && betWinCounter > 5){
//         lvlStatus = true
//         refreshLvl(currentLvl)
//         getBtn.classList.remove("_lock")
//         document.querySelector(".bonus__progress-lvl._active").classList.add("_up")
//         return lvlStatus
//     }
// }
checkStatus();
var idArr = userTablePlace.textContent.split("");

// console.log(idArr)

if (idArr.length === 1) {
  userTablePlace.classList.add('_one');
}
if (idArr.length === 2) {
  userTablePlace.classList.add('_two');
}
if (idArr.length === 3) {
  userTablePlace.classList.add('_three');
}
if (idArr.length === 4) {
  userTablePlace.classList.add('_four');
}
if (idArr.length === 5) {
  userTablePlace.classList.add('_five');
}
function openCaseAnim(box) {
  box.classList.add("shake");
  box.querySelector(".box__cap").classList.add("open");
  getBtn.classList.add("_lock");
  setTimeout(function () {
    box.querySelector(".box__cap-front").classList.add("hide");
  }, 300);
  setTimeout(function () {
    box.classList.add("_show");
  }, 450);
  setTimeout(function () {
    lvlUp();
    refreshCases(currentLvl);
    checkStatus();
  }, 4000);
}
getBtn.addEventListener('click', function () {
  cases.forEach(function (box, i) {
    if (box.classList.contains("_active")) {
      openCaseAnim(box);
      // getBtn.classList.add("_lock")
      // checkStatus()
    }
  });
});

function setPopup(btnOpen, btnClose, popup) {
  btnOpen.addEventListener("click", function () {
    popup.classList.remove("hide");
  });
  if (btnClose) {
    btnClose.addEventListener("click", function () {
      popup.classList.add("hide");
    });
    document.addEventListener("click", function (e) {
      if (!popup.contains(e.target) && e.target !== btnOpen) {
        popup.classList.add("hide");
      }
    });
  }
}
setPopup(progressPopupBtn, progressPopupClose, progressPopup);
setPopup(updPopupBtn, null, updPopup);
setPopup(resultPopupBtn, resultPopupBtnClose, resultPopup);
function startCountdown(endTime) {
  var hoursEls = document.querySelectorAll(".timer__hours-item");
  var minutesEls = document.querySelectorAll(".timer__minutes-item");
  var secondsEls = document.querySelectorAll(".timer__seconds-item");
  function updateTimer() {
    var now = new Date().getTime();
    var timeLeft = endTime - now;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      updateDigits(hoursEls, "00");
      updateDigits(minutesEls, "00");
      updateDigits(secondsEls, "00");
      return;
    }
    var hours = Math.floor(timeLeft / (1000 * 60 * 60) % 24);
    var minutes = Math.floor(timeLeft / (1000 * 60) % 60);
    var seconds = Math.floor(timeLeft / 1000 % 60);
    updateDigits(hoursEls, String(hours).padStart(2, "0"));
    updateDigits(minutesEls, String(minutes).padStart(2, "0"));
    updateDigits(secondsEls, String(seconds).padStart(2, "0"));
  }
  function updateDigits(elements, value) {
    elements[0].textContent = value[0];
    elements[1].textContent = value[1];
  }
  updateTimer();
  var timerInterval = setInterval(updateTimer, 1000);
}
var now = new Date();
var endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59).getTime();
startCountdown(endOfDay);
document.querySelector(".menu-btn").addEventListener("click", function () {
  document.querySelector(".menu-test").classList.toggle("hidden");
});
document.querySelector(".btn-lvl").addEventListener("click", function () {
  document.querySelector(".lvl-menu").classList.toggle("hidden");
});
var lvl1 = document.querySelector(".lvl-1");
var lvl2 = document.querySelector(".lvl-2");
var lvl3 = document.querySelector(".lvl-3");
var lvlUpBtn = document.querySelector(".lvl-up");
var betWin = document.querySelector(".bet-win");
var betClear = document.querySelector(".bet-clear");
betWin.textContent = "win bet: ".concat(betWinCounter);
betWin.addEventListener("click", function () {
  betWinCounter = sessionStorage.getItem("betWinCounter") ? Number(sessionStorage.getItem("betWinCounter")) : 0;
  betWinCounter = betWinCounter + 1;
  sessionStorage.setItem("betWinCounter", betWinCounter);
  betWin.textContent = "win bet: ".concat(betWinCounter);
  // refreshLvl(currentLvl)
  checkStatus();
});
betClear.addEventListener("click", function () {
  sessionStorage.removeItem("betWinCounter");
  betWinCounter = 0;
  betWin.textContent = "win bet: 0";
  checkStatus();
  sessionStorage.setItem("currentLvl", "1");
  window.location.reload();
  // refreshLvl(currentLvl, lvlStatus)
});

lvl1.addEventListener("click", function () {
  sessionStorage.setItem("currentLvl", "1");
  window.location.reload();
});
lvl2.addEventListener("click", function () {
  sessionStorage.setItem("currentLvl", "2");
  window.location.reload();
});
lvl3.addEventListener("click", function () {
  sessionStorage.setItem("currentLvl", "3");
  window.location.reload();
});
lvlUpBtn.addEventListener("click", function () {
  lvlStatus = !lvlStatus;
  checkStatus();
  lvlStatus = !lvlStatus;
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidXNlclBsYWNlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidXNlclRhYmxlUGxhY2UiLCJjYXNlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnZXRCdG4iLCJsZXZlbHMiLCJwcm9ncmVzc1BvcHVwIiwicHJvZ3Jlc3NQb3B1cEJ0biIsInByb2dyZXNzUG9wdXBDbG9zZSIsInVwZFBvcHVwIiwidXBkUG9wdXBCdG4iLCJyZXN1bHRQb3B1cCIsInJlc3VsdFBvcHVwQnRuIiwicmVzdWx0UG9wdXBCdG5DbG9zZSIsImN1cnJlbnRMdmwiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJOdW1iZXIiLCJsdmxTdGF0dXMiLCJiZXRXaW5Db3VudGVyIiwib3BlbkNhc2VDb3VudGVyIiwiY2hlY2tTdGF0dXMiLCJhY3RpdmVMdmwiLCJjb25kaXRpb25zIiwiYmV0IiwibHZsIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVmcmVzaEx2bCIsInJlbW92ZSIsImZvckVhY2giLCJpIiwicmVmcmVzaENhc2VzIiwiYm94IiwiYWN0aXZlSW5kZXgiLCJsZW5ndGgiLCJwcmV2SW5kZXgiLCJuZXh0SW5kZXgiLCJsdmxVcCIsInNldEl0ZW0iLCJpZEFyciIsInRleHRDb250ZW50Iiwic3BsaXQiLCJvcGVuQ2FzZUFuaW0iLCJzZXRUaW1lb3V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwic2V0UG9wdXAiLCJidG5PcGVuIiwiYnRuQ2xvc2UiLCJwb3B1cCIsImUiLCJ0YXJnZXQiLCJzdGFydENvdW50ZG93biIsImVuZFRpbWUiLCJob3Vyc0VscyIsIm1pbnV0ZXNFbHMiLCJzZWNvbmRzRWxzIiwidXBkYXRlVGltZXIiLCJub3ciLCJEYXRlIiwiZ2V0VGltZSIsInRpbWVMZWZ0IiwiY2xlYXJJbnRlcnZhbCIsInRpbWVySW50ZXJ2YWwiLCJ1cGRhdGVEaWdpdHMiLCJob3VycyIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJlbGVtZW50cyIsInZhbHVlIiwic2V0SW50ZXJ2YWwiLCJlbmRPZkRheSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwidG9nZ2xlIiwibHZsMSIsImx2bDIiLCJsdmwzIiwibHZsVXBCdG4iLCJiZXRXaW4iLCJiZXRDbGVhciIsInJlbW92ZUl0ZW0iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxTQUFTLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLE1BQU0sQ0FBQztFQUM1Q0MsY0FBYyxHQUFHSCxTQUFTLENBQUNFLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQztFQUMvREUsS0FBSyxHQUFHSCxRQUFRLENBQUNJLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDO0VBQ3ZEQyxNQUFNLEdBQUdMLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFVBQVUsQ0FBQztFQUMzQ0ssTUFBTSxHQUFHTixRQUFRLENBQUNJLGdCQUFnQixDQUFDLHNCQUFzQixDQUFDO0VBQzFERyxhQUFhLEdBQUdQLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLHdCQUF3QixDQUFDO0VBQ2hFTyxnQkFBZ0IsR0FBR1IsUUFBUSxDQUFDQyxhQUFhLENBQUMsNEJBQTRCLENBQUM7RUFDdkVRLGtCQUFrQixHQUFHVCxRQUFRLENBQUNDLGFBQWEsQ0FBQyw4QkFBOEIsQ0FBQztFQUMzRVMsUUFBUSxHQUFHVixRQUFRLENBQUNDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQztFQUNwRFUsV0FBVyxHQUFHWCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQztFQUN2RFcsV0FBVyxHQUFHWixRQUFRLENBQUNDLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQztFQUMvRFksY0FBYyxHQUFHYixRQUFRLENBQUNDLGFBQWEsQ0FBQyx1QkFBdUIsQ0FBQztFQUNoRWEsbUJBQW1CLEdBQUdkLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLCtCQUErQixDQUFDO0FB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Q3pDaUQsTUFBTSxDQUFDQyxRQUFRLENBQUNDLE1BQU0sRUFBRTtBQUM1QixDQUFDLENBQUM7QUFDRlAsSUFBSSxDQUFDdEMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQUs7RUFDaEM5QixjQUFjLENBQUN3QixPQUFPLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQztFQUN6Q2lELE1BQU0sQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLEVBQUU7QUFDNUIsQ0FBQyxDQUFDO0FBRUZOLFFBQVEsQ0FBQ3ZDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFLO0VBQ3BDM0IsU0FBUyxHQUFHLENBQUNBLFNBQVM7RUFDdEJHLFdBQVcsRUFBRTtFQUNiSCxTQUFTLEdBQUcsQ0FBQ0EsU0FBUztBQUUxQixDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVzZXJQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueW91XCIpLFxuICAgIHVzZXJUYWJsZVBsYWNlID0gdXNlclBsYWNlLnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2Jsb2NrLXBsYWNlXCIpLFxuICAgIGNhc2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ib251c19fYm94ZXMtaXRlbVwiKSxcbiAgICBnZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdldC1idG5cIiksXG4gICAgbGV2ZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ib251c19fcHJvZ3Jlc3MtbHZsXCIpLFxuICAgIHByb2dyZXNzUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvbnVzX19wcm9ncmVzcy1wb3B1cFwiKSxcbiAgICBwcm9ncmVzc1BvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fcHJvZ3Jlc3MtdGl0bGUtYnRuXCIpLFxuICAgIHByb2dyZXNzUG9wdXBDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9udXNfX3Byb2dyZXNzLXBvcHVwLWNsb3NlXCIpLFxuICAgIHVwZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fd2FybmluZ1wiKSxcbiAgICB1cGRQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9udXNfX3VwZC1idG5cIiksXG4gICAgcmVzdWx0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdF9fc3VidGl0bGUtcG9wdXBcIiksXG4gICAgcmVzdWx0UG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdF9fc3VidGl0bGUtYnRuXCIpLFxuICAgIHJlc3VsdFBvcHVwQnRuQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdF9fc3VidGl0bGUtcG9wdXAtY2xvc2VcIik7XG5cbmxldCBjdXJyZW50THZsID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRMdmxcIikgPyBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRMdmxcIikpIDogMVxuXG5sZXQgbHZsU3RhdHVzID0gZmFsc2VcbmxldCBiZXRXaW5Db3VudGVyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImJldFdpbkNvdW50ZXJcIikgPyBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImJldFdpbkNvdW50ZXJcIikpIDogMFxubGV0IG9wZW5DYXNlQ291bnRlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJvcGVuQ2FzZUNvdW50ZXJcIikgPyBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcIm9wZW5DYXNlQ291bnRlclwiKSkgOiAwXG5cbi8vIGlmKGN1cnJlbnRMdmwgPT09IDEgJiYgYmV0V2luQ291bnRlciA+IDEgKXtcbi8vICAgICBsdmxTdGF0dXMgPSB0cnVlXG4vLyB9XG4vLyBpZihjdXJyZW50THZsID09PSAyICYmIGJldFdpbkNvdW50ZXIgPiAzKXtcbi8vICAgICBsdmxTdGF0dXMgPSB0cnVlXG4vLyB9XG4vLyBpZihjdXJyZW50THZsID09PSAzICYmIGJldFdpbkNvdW50ZXIgPiA1KXtcbi8vICAgICBsdmxTdGF0dXMgPSB0cnVlXG4vLyB9XG5cblxubHZsU3RhdHVzID0gY2hlY2tTdGF0dXMoKTtcblxuZnVuY3Rpb24gY2hlY2tTdGF0dXMoKSB7XG4gICAgY29uc3QgYWN0aXZlTHZsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fcHJvZ3Jlc3MtbHZsLl9hY3RpdmVcIik7XG4gICAgY29uc3QgY29uZGl0aW9ucyA9IHtcbiAgICAgICAgYmV0OiB7XG4gICAgICAgICAgICAxOiBiZXRXaW5Db3VudGVyID4gMSxcbiAgICAgICAgICAgIDI6IGJldFdpbkNvdW50ZXIgPiAzLFxuICAgICAgICAgICAgMzogYmV0V2luQ291bnRlciA+IDUsXG4gICAgICAgIH0sXG4gICAgICAgIGx2bDoge1xuICAgICAgICAgICAgMTogY3VycmVudEx2bCA9PT0gMSxcbiAgICAgICAgICAgIDI6IGN1cnJlbnRMdmwgPT09IDIsXG4gICAgICAgICAgICAzOiBjdXJyZW50THZsID09PSAzLFxuICAgICAgICB9XG5cbiAgICB9O1xuICAgIGdldEJ0bi5jbGFzc0xpc3QuYWRkKFwiX2xvY2tcIik7XG4gICAgaWYgKGNvbmRpdGlvbnMuYmV0W2N1cnJlbnRMdmxdICYmIGNvbmRpdGlvbnMubHZsW2N1cnJlbnRMdmxdKSB7XG4gICAgICAgIGx2bFN0YXR1cyA9IHRydWU7XG4gICAgICAgIHJlZnJlc2hMdmwoY3VycmVudEx2bCwgbHZsU3RhdHVzKTtcbiAgICAgICAgZ2V0QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJfbG9ja1wiKTtcblxuICAgICAgICBpZiAoYWN0aXZlTHZsKSBhY3RpdmVMdmwuY2xhc3NMaXN0LmFkZChcIl91cFwiKTtcblxuICAgICAgICByZXR1cm4gbHZsU3RhdHVzO1xuICAgIH1cbiAgICBsdmxTdGF0dXMgPSBmYWxzZTtcbiAgICByZWZyZXNoTHZsKGN1cnJlbnRMdmwsIGx2bFN0YXR1cylcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlZnJlc2hMdmwoY3VycmVudEx2bCwgbHZsU3RhdHVzKXtcbiAgICBsZXZlbHMuZm9yRWFjaCgobHZsLCBpKSA9PntcbiAgICAgICAgbHZsLmNsYXNzTGlzdC5yZW1vdmUoXCJfYWN0aXZlXCIpXG4gICAgICAgIGx2bC5jbGFzc0xpc3QucmVtb3ZlKFwiX2RvbmVcIilcbiAgICAgICAgbHZsLmNsYXNzTGlzdC5yZW1vdmUoXCJfdm9pZFwiKVxuICAgICAgICBsdmwuY2xhc3NMaXN0LnJlbW92ZShcIl91cFwiKVxuICAgICAgICBpZigrK2kgPT09IGN1cnJlbnRMdmwpIHtcbiAgICAgICAgICAgIGx2bC5jbGFzc0xpc3QuYWRkKFwiX2FjdGl2ZVwiKVxuXG4gICAgICAgICAgICBpZiAobHZsU3RhdHVzID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBsdmwuY2xhc3NMaXN0LmFkZChcIl91cFwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoY3VycmVudEx2bCA9PT0gMSAmJiBiZXRXaW5Db3VudGVyIDw9IDAgJiYgbHZsU3RhdHVzID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgbHZsLmNsYXNzTGlzdC5hZGQoXCJfdm9pZFwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoY3VycmVudEx2bCA9PT0gMSAmJiBiZXRXaW5Db3VudGVyIDw9IDAgJiYgbHZsU3RhdHVzID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBsdmwuY2xhc3NMaXN0LnJlbW92ZShcIl92b2lkXCIpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGN1cnJlbnRMdmwgPT09IDIgJiYgYmV0V2luQ291bnRlciA8PSAyICYmIGx2bFN0YXR1cyA9PT0gZmFsc2UgKXtcbiAgICAgICAgICAgICAgICBsdmwuY2xhc3NMaXN0LmFkZChcIl92b2lkXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihjdXJyZW50THZsID09PSAyICYmIGJldFdpbkNvdW50ZXIgPD0gMiAmJiBsdmxTdGF0dXMgPT09IHRydWUgKXtcbiAgICAgICAgICAgICAgICBsdmwuY2xhc3NMaXN0LnJlbW92ZShcIl92b2lkXCIpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGN1cnJlbnRMdmwgPT09IDMgJiYgYmV0V2luQ291bnRlciA8PSA0ICYmIGx2bFN0YXR1cyA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgIGx2bC5jbGFzc0xpc3QuYWRkKFwiX3ZvaWRcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGN1cnJlbnRMdmwgPT09IDMgJiYgYmV0V2luQ291bnRlciA8PSA0ICYmIGx2bFN0YXR1cyA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgbHZsLmNsYXNzTGlzdC5yZW1vdmUoXCJfdm9pZFwiKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbHZsLmNsYXNzTGlzdC5yZW1vdmUoXCJfYWN0aXZlXCIpXG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS5sb2coaSA8IGN1cnJlbnRMdmwsIGkgLCBjdXJyZW50THZsLCBsdmwpXG4gICAgICAgIGkgPCBjdXJyZW50THZsID8gbHZsLmNsYXNzTGlzdC5hZGQoXCJfZG9uZVwiKSA6IG51bGxcbiAgICB9KVxuXG59XG5cbmZ1bmN0aW9uIHJlZnJlc2hDYXNlcyhjdXJyZW50THZsKSB7XG4gICAgY2FzZXMuZm9yRWFjaCgoYm94LCBpKSA9PiB7XG4gICAgICAgIGJveC5jbGFzc0xpc3QucmVtb3ZlKFwiX2FjdGl2ZVwiLCBcIl9sZWZ0XCIsIFwiX3JpZ2h0XCIsIFwiX2xvY2tcIik7XG4gICAgfSk7XG5cbiAgICBsZXQgYWN0aXZlSW5kZXggPSBjdXJyZW50THZsIC0gMTtcbiAgICBpZiAoYWN0aXZlSW5kZXggPj0gY2FzZXMubGVuZ3RoKSB7XG4gICAgICAgIGFjdGl2ZUluZGV4ID0gY2FzZXMubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBsZXQgcHJldkluZGV4ID0gYWN0aXZlSW5kZXggLSAxIDwgMCA/IGNhc2VzLmxlbmd0aCAtIDEgOiBhY3RpdmVJbmRleCAtIDE7XG4gICAgbGV0IG5leHRJbmRleCA9IGFjdGl2ZUluZGV4ICsgMSA+PSBjYXNlcy5sZW5ndGggPyAwIDogYWN0aXZlSW5kZXggKyAxO1xuXG4gICAgY2FzZXNbYWN0aXZlSW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJfYWN0aXZlXCIpO1xuICAgIGNhc2VzW3ByZXZJbmRleF0uY2xhc3NMaXN0LmFkZChcIl9sZWZ0XCIpO1xuICAgIGNhc2VzW25leHRJbmRleF0uY2xhc3NMaXN0LmFkZChcIl9yaWdodFwiKTtcblxuICAgIGNhc2VzLmZvckVhY2goKGJveCwgaSkgPT4ge1xuICAgICAgICBpZiAoaSAhPT0gYWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICAgIGJveC5jbGFzc0xpc3QuYWRkKFwiX2xvY2tcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5yZWZyZXNoQ2FzZXMoY3VycmVudEx2bClcbnJlZnJlc2hMdmwoY3VycmVudEx2bClcblxuZnVuY3Rpb24gbHZsVXAoKXtcbiAgICBjdXJyZW50THZsID0gY3VycmVudEx2bCArIDFcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudEx2bFwiLCBgJHtjdXJyZW50THZsfWApXG4gICAgLy8gbHZsU3RhdHVzID0gZmFsc2VcbiAgICBjaGVja1N0YXR1cygpXG4gICAgcmV0dXJuIGx2bFN0YXR1c1xufVxuXG4vLyBmdW5jdGlvbiBjaGVja1N0YXR1cygpe1xuLy8gICAgIGlmKGN1cnJlbnRMdmwgPT09IDEgJiYgYmV0V2luQ291bnRlciA+IDEgKXtcbi8vICAgICAgICAgbHZsU3RhdHVzID0gdHJ1ZVxuLy8gICAgICAgICByZWZyZXNoTHZsKGN1cnJlbnRMdmwpXG4vLyAgICAgICAgIGdldEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiX2xvY2tcIilcbi8vICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib251c19fcHJvZ3Jlc3MtbHZsLl9hY3RpdmVcIikuY2xhc3NMaXN0LmFkZChcIl91cFwiKVxuLy8gICAgICAgICByZXR1cm4gbHZsU3RhdHVzXG4vLyAgICAgfVxuLy8gICAgIGlmKGN1cnJlbnRMdmwgPT09IDIgJiYgYmV0V2luQ291bnRlciA+IDMpe1xuLy8gICAgICAgICBsdmxTdGF0dXMgPSB0cnVlXG4vLyAgICAgICAgIHJlZnJlc2hMdmwoY3VycmVudEx2bClcbi8vICAgICAgICAgZ2V0QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJfbG9ja1wiKVxuLy8gICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvbnVzX19wcm9ncmVzcy1sdmwuX2FjdGl2ZVwiKS5jbGFzc0xpc3QuYWRkKFwiX3VwXCIpXG4vLyAgICAgICAgIHJldHVybiBsdmxTdGF0dXNcbi8vICAgICB9XG4vLyAgICAgaWYoY3VycmVudEx2bCA9PT0gMyAmJiBiZXRXaW5Db3VudGVyID4gNSl7XG4vLyAgICAgICAgIGx2bFN0YXR1cyA9IHRydWVcbi8vICAgICAgICAgcmVmcmVzaEx2bChjdXJyZW50THZsKVxuLy8gICAgICAgICBnZXRCdG4uY2xhc3NMaXN0LnJlbW92ZShcIl9sb2NrXCIpXG4vLyAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm9udXNfX3Byb2dyZXNzLWx2bC5fYWN0aXZlXCIpLmNsYXNzTGlzdC5hZGQoXCJfdXBcIilcbi8vICAgICAgICAgcmV0dXJuIGx2bFN0YXR1c1xuLy8gICAgIH1cbi8vIH1cbmNoZWNrU3RhdHVzKClcblxubGV0IGlkQXJyID0gdXNlclRhYmxlUGxhY2UudGV4dENvbnRlbnQuc3BsaXQoXCJcIilcblxuLy8gY29uc29sZS5sb2coaWRBcnIpXG5cbmlmKGlkQXJyLmxlbmd0aCA9PT0gMSl7XG4gICAgdXNlclRhYmxlUGxhY2UuY2xhc3NMaXN0LmFkZCgnX29uZScpXG59XG5pZihpZEFyci5sZW5ndGggPT09IDIpe1xuICAgIHVzZXJUYWJsZVBsYWNlLmNsYXNzTGlzdC5hZGQoJ190d28nKVxufVxuaWYoaWRBcnIubGVuZ3RoID09PSAzKXtcbiAgICB1c2VyVGFibGVQbGFjZS5jbGFzc0xpc3QuYWRkKCdfdGhyZWUnKVxufVxuaWYoaWRBcnIubGVuZ3RoID09PSA0KXtcbiAgICB1c2VyVGFibGVQbGFjZS5jbGFzc0xpc3QuYWRkKCdfZm91cicpXG59XG5cbmlmKGlkQXJyLmxlbmd0aCA9PT0gNSl7XG4gICAgdXNlclRhYmxlUGxhY2UuY2xhc3NMaXN0LmFkZCgnX2ZpdmUnKVxufVxuXG5mdW5jdGlvbiBvcGVuQ2FzZUFuaW0oYm94KXtcbiAgICBib3guY2xhc3NMaXN0LmFkZChcInNoYWtlXCIpXG4gICAgYm94LnF1ZXJ5U2VsZWN0b3IoXCIuYm94X19jYXBcIikuY2xhc3NMaXN0LmFkZChcIm9wZW5cIilcbiAgICBnZXRCdG4uY2xhc3NMaXN0LmFkZChcIl9sb2NrXCIpXG4gICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgYm94LnF1ZXJ5U2VsZWN0b3IoXCIuYm94X19jYXAtZnJvbnRcIikuY2xhc3NMaXN0LmFkZChcImhpZGVcIilcbiAgICB9LCAzMDApXG4gICAgc2V0VGltZW91dCgoKSA9PntcbiAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoXCJfc2hvd1wiKVxuICAgIH0sIDQ1MClcbiAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICBsdmxVcCgpXG4gICAgICAgIHJlZnJlc2hDYXNlcyhjdXJyZW50THZsKVxuICAgICAgICBjaGVja1N0YXR1cygpXG4gICAgfSwgNDAwMClcbn1cblxuXG5cblxuZ2V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XG4gICAgY2FzZXMuZm9yRWFjaCgoYm94LCBpKSA9PntcbiAgICAgICAgaWYoYm94LmNsYXNzTGlzdC5jb250YWlucyhcIl9hY3RpdmVcIikpe1xuICAgICAgICAgICAgb3BlbkNhc2VBbmltKGJveClcbiAgICAgICAgICAgIC8vIGdldEJ0bi5jbGFzc0xpc3QuYWRkKFwiX2xvY2tcIilcbiAgICAgICAgICAgIC8vIGNoZWNrU3RhdHVzKClcbiAgICAgICAgfVxuXG4gICAgfSlcblxufSlcblxuXG5mdW5jdGlvbiBzZXRQb3B1cChidG5PcGVuLCBidG5DbG9zZSwgcG9wdXApe1xuICAgIGJ0bk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+e1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKVxuICAgIH0pXG4gICAgaWYoYnRuQ2xvc2Upe1xuICAgICAgICBidG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgICAgICB9KVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICAgICAgaWYoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0KSAmJiBlLnRhcmdldCAhPT0gYnRuT3Blbil7XG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZChcImhpZGVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cblxuc2V0UG9wdXAocHJvZ3Jlc3NQb3B1cEJ0biwgcHJvZ3Jlc3NQb3B1cENsb3NlLCBwcm9ncmVzc1BvcHVwKVxuc2V0UG9wdXAodXBkUG9wdXBCdG4sIG51bGwsIHVwZFBvcHVwKVxuc2V0UG9wdXAocmVzdWx0UG9wdXBCdG4sIHJlc3VsdFBvcHVwQnRuQ2xvc2UsIHJlc3VsdFBvcHVwKVxuXG5mdW5jdGlvbiBzdGFydENvdW50ZG93bihlbmRUaW1lKSB7XG4gICAgY29uc3QgaG91cnNFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyX19ob3Vycy1pdGVtXCIpO1xuICAgIGNvbnN0IG1pbnV0ZXNFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWVyX19taW51dGVzLWl0ZW1cIik7XG4gICAgY29uc3Qgc2Vjb25kc0VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZXJfX3NlY29uZHMtaXRlbVwiKTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWVyKCkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgdGltZUxlZnQgPSBlbmRUaW1lIC0gbm93O1xuXG4gICAgICAgIGlmICh0aW1lTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySW50ZXJ2YWwpO1xuICAgICAgICAgICAgdXBkYXRlRGlnaXRzKGhvdXJzRWxzLCBcIjAwXCIpO1xuICAgICAgICAgICAgdXBkYXRlRGlnaXRzKG1pbnV0ZXNFbHMsIFwiMDBcIik7XG4gICAgICAgICAgICB1cGRhdGVEaWdpdHMoc2Vjb25kc0VscywgXCIwMFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigodGltZUxlZnQgLyAoMTAwMCAqIDYwICogNjApKSAlIDI0KTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWVMZWZ0IC8gKDEwMDAgKiA2MCkpICUgNjApO1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcigodGltZUxlZnQgLyAxMDAwKSAlIDYwKTtcblxuICAgICAgICB1cGRhdGVEaWdpdHMoaG91cnNFbHMsIFN0cmluZyhob3VycykucGFkU3RhcnQoMiwgXCIwXCIpKTtcbiAgICAgICAgdXBkYXRlRGlnaXRzKG1pbnV0ZXNFbHMsIFN0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCBcIjBcIikpO1xuICAgICAgICB1cGRhdGVEaWdpdHMoc2Vjb25kc0VscywgU3RyaW5nKHNlY29uZHMpLnBhZFN0YXJ0KDIsIFwiMFwiKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGlnaXRzKGVsZW1lbnRzLCB2YWx1ZSkge1xuICAgICAgICBlbGVtZW50c1swXS50ZXh0Q29udGVudCA9IHZhbHVlWzBdO1xuICAgICAgICBlbGVtZW50c1sxXS50ZXh0Q29udGVudCA9IHZhbHVlWzFdO1xuICAgIH1cblxuICAgIHVwZGF0ZVRpbWVyKCk7XG4gICAgY29uc3QgdGltZXJJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCAxMDAwKTtcbn1cblxuY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbmNvbnN0IGVuZE9mRGF5ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpLCAyMywgNTksIDU5KS5nZXRUaW1lKCk7XG5cbnN0YXJ0Q291bnRkb3duKGVuZE9mRGF5KTtcblxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtYnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtdGVzdFwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG59KVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tbHZsXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmx2bC1tZW51XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbn0pXG5cbmNvbnN0IGx2bDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmx2bC0xXCIpXG5jb25zdCBsdmwyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sdmwtMlwiKVxuY29uc3QgbHZsMyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubHZsLTNcIilcbmNvbnN0IGx2bFVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sdmwtdXBcIilcbmNvbnN0IGJldFdpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmV0LXdpblwiKVxuY29uc3QgYmV0Q2xlYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJldC1jbGVhclwiKVxuXG5iZXRXaW4udGV4dENvbnRlbnQgPSBgd2luIGJldDogJHtiZXRXaW5Db3VudGVyfWBcblxuYmV0V2luLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcbiAgICBiZXRXaW5Db3VudGVyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImJldFdpbkNvdW50ZXJcIikgPyBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImJldFdpbkNvdW50ZXJcIikpIDogMFxuICAgIGJldFdpbkNvdW50ZXIgPSBiZXRXaW5Db3VudGVyICsgMVxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJiZXRXaW5Db3VudGVyXCIsIGJldFdpbkNvdW50ZXIpXG4gICAgYmV0V2luLnRleHRDb250ZW50ID0gYHdpbiBiZXQ6ICR7YmV0V2luQ291bnRlcn1gXG4gICAgLy8gcmVmcmVzaEx2bChjdXJyZW50THZsKVxuICAgIGNoZWNrU3RhdHVzKClcblxuXG59KVxuXG5iZXRDbGVhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcImJldFdpbkNvdW50ZXJcIilcbiAgICBiZXRXaW5Db3VudGVyID0gMFxuICAgIGJldFdpbi50ZXh0Q29udGVudCA9IGB3aW4gYmV0OiAwYFxuICAgIGNoZWNrU3RhdHVzKClcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudEx2bFwiLCBcIjFcIilcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAvLyByZWZyZXNoTHZsKGN1cnJlbnRMdmwsIGx2bFN0YXR1cylcblxufSlcblxubHZsMS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMdmxcIiwgXCIxXCIpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59KVxubHZsMi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMdmxcIiwgXCIyXCIpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59KVxubHZsMy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRMdmxcIiwgXCIzXCIpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59KVxuXG5sdmxVcEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT57XG4gICAgbHZsU3RhdHVzID0gIWx2bFN0YXR1c1xuICAgIGNoZWNrU3RhdHVzKClcbiAgICBsdmxTdGF0dXMgPSAhbHZsU3RhdHVzXG5cbn0pIl19
